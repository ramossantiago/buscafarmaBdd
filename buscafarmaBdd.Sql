/*============================================================================*/
/* DBMS: MySql 5*/
/* Created on : 27/07/2018 17:26:04                                           */
/*============================================================================*/


/*============================================================================*/
/*                                  TABLES                                    */
/*============================================================================*/
CREATE TABLE `UBICACION` (
  `UBICACION_ID`              INTEGER(10) NOT NULL,
  `USUARIO_ID`                INTEGER(10),
CONSTRAINT `PK_UBICACION` PRIMARY KEY (`UBICACION_ID`)
);

CREATE TABLE `PRODUCTO` (
  `PRODUCTO_ID`               INTEGER(10) NOT NULL,
  `CATEGORIA_ID`              INTEGER(10),
CONSTRAINT `PK_PRODUCTO` PRIMARY KEY (`PRODUCTO_ID`)
);

CREATE TABLE `UBICACION_PRODUCTO` (
  `UBICA_PROD_ID`             INTEGER(10) NOT NULL,
  `UBICACION_ID`              INTEGER(10),
  `PRODUCTO_ID`               INTEGER(10),
CONSTRAINT `PK_UBICACION_PRODUCTO` PRIMARY KEY (`UBICA_PROD_ID`)
);

CREATE TABLE `HORARIO_EXTENDIDO_UBICACION` (
  `ENTITY4_ID`                INTEGER(10) NOT NULL,
  `UBICACION_ID`              INTEGER(10),
  `HORARIO_ID`                INTEGER(10),
CONSTRAINT `PK_HORARIO_EXTENDIDO_UBICACION` PRIMARY KEY (`ENTITY4_ID`)
);

CREATE TABLE `HORARIO_EXTENDIDO` (
  `HORARIO_ID`                INTEGER(10) NOT NULL,
CONSTRAINT `PK_HORARIO_EXTENDIDO` PRIMARY KEY (`HORARIO_ID`)
);

CREATE TABLE `CATEGORIA_PRODUCTO` (
  `CATEGORIA_ID`              INTEGER(10) NOT NULL,
CONSTRAINT `PK_CATEGORIA_PRODUCTO` PRIMARY KEY (`CATEGORIA_ID`)
);

CREATE TABLE `USUARIO` (
  `USUARIO_ID`                INTEGER(10) NOT NULL,
  `CIUDAD_ID`                 INTEGER(10),
CONSTRAINT `PK_USUARIO` PRIMARY KEY (`USUARIO_ID`)
);

CREATE TABLE `CIUDAD` (
  `CIUDAD_ID`                 INTEGER(10) NOT NULL,
  `PROVINCIA_ID`              INTEGER(10),
CONSTRAINT `PK_CIUDAD` PRIMARY KEY (`CIUDAD_ID`)
);

CREATE TABLE `PROVINCIA` (
  `PROVINCIA_ID`              INTEGER(10) NOT NULL,
  `PAIS_ID`                   INTEGER(10),
CONSTRAINT `PK_PROVINCIA` PRIMARY KEY (`PROVINCIA_ID`)
);

CREATE TABLE `PAIS` (
  `PAIS_ID`                   INTEGER(10) NOT NULL,
CONSTRAINT `PK_PAIS` PRIMARY KEY (`PAIS_ID`)
);

CREATE TABLE `BUSQUEDA_USUARIO` (
  `BUSQUEDA_USUARIO_ID`       INTEGER(10) NOT NULL,
  `PRODUCTO_ID`               INTEGER(10),
  `UBICACION_ID`              INTEGER(10),
CONSTRAINT `PK_BUSQUEDA_USUARIO` PRIMARY KEY (`BUSQUEDA_USUARIO_ID`)
);

/*============================================================================*/
/*                               FOREIGN KEYS                                 */
/*============================================================================*/
ALTER TABLE `UBICACION`
    ADD CONSTRAINT `FK_REFERENCE_13`
        FOREIGN KEY (`USUARIO_ID`)
            REFERENCES `USUARIO` (`USUARIO_ID`)
 ;


ALTER TABLE `PRODUCTO`
    ADD CONSTRAINT `FK_REFERENCE_15`
        FOREIGN KEY (`CATEGORIA_ID`)
            REFERENCES `CATEGORIA_PRODUCTO` (`CATEGORIA_ID`)
 ;


ALTER TABLE `UBICACION_PRODUCTO`
    ADD CONSTRAINT `FK_REFERENCE_11`
        FOREIGN KEY (`UBICACION_ID`)
            REFERENCES `UBICACION` (`UBICACION_ID`)
 ;

ALTER TABLE `UBICACION_PRODUCTO`
    ADD CONSTRAINT `FK_REFERENCE_14`
        FOREIGN KEY (`PRODUCTO_ID`)
            REFERENCES `PRODUCTO` (`PRODUCTO_ID`)
 ;


ALTER TABLE `HORARIO_EXTENDIDO_UBICACION`
    ADD CONSTRAINT `FK_REFERENCE_12`
        FOREIGN KEY (`UBICACION_ID`)
            REFERENCES `UBICACION` (`UBICACION_ID`)
 ;

ALTER TABLE `HORARIO_EXTENDIDO_UBICACION`
    ADD CONSTRAINT `FK_REFERENCE_16`
        FOREIGN KEY (`HORARIO_ID`)
            REFERENCES `HORARIO_EXTENDIDO` (`HORARIO_ID`)
 ;


ALTER TABLE `USUARIO`
    ADD CONSTRAINT `FK_REFERENCE_19`
        FOREIGN KEY (`CIUDAD_ID`)
            REFERENCES `CIUDAD` (`CIUDAD_ID`)
 ;


ALTER TABLE `CIUDAD`
    ADD CONSTRAINT `FK_REFERENCE_18`
        FOREIGN KEY (`PROVINCIA_ID`)
            REFERENCES `PROVINCIA` (`PROVINCIA_ID`)
 ;


ALTER TABLE `PROVINCIA`
    ADD CONSTRAINT `FK_REFERENCE_17`
        FOREIGN KEY (`PAIS_ID`)
            REFERENCES `PAIS` (`PAIS_ID`)
 ;


ALTER TABLE `BUSQUEDA_USUARIO`
    ADD CONSTRAINT `FK_REFERENCE_10`
        FOREIGN KEY (`PRODUCTO_ID`)
            REFERENCES `PRODUCTO` (`PRODUCTO_ID`)
 ;

ALTER TABLE `BUSQUEDA_USUARIO`
    ADD CONSTRAINT `FK_REFERENCE_20`
        FOREIGN KEY (`UBICACION_ID`)
            REFERENCES `UBICACION` (`UBICACION_ID`)
 ;


